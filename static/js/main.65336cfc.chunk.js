(this["webpackJsonpcovid-tracker"]=this["webpackJsonpcovid-tracker"]||[]).push([[0],{235:function(t,e){},237:function(t,e){},247:function(t,e,a){},254:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a(1),c=a.n(n),o=a(111),s=a.n(o),i=a(6),l=a(112),u=a.n(l),d=a(110),f=a(113),j=(a(247),a(5)),m=a(20),p=a.n(m);function b(){return(b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t}).apply(this,arguments)}function h(t,e){if(null==t)return{};var a,r,n=function(t,e){if(null==t)return{};var a,r,n={},c=Object.keys(t);for(r=0;r<c.length;r++)a=c[r],e.indexOf(a)>=0||(n[a]=t[a]);return n}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)a=c[r],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}var O=n.createElement("path",{d:"M 64 6 C 48.5 6 33.9 12 23 23 C 12 33.9 6 48.5 6 64 C 6 79.5 12 94.1 23 105 C 34 116 48.5 122 64 122 C 79.5 122 94.1 116 105 105 C 116 94 122 79.5 122 64 C 122 48.5 116 33.9 105 23 C 94.1 12 79.5 6 64 6 z M 64 12 C 77.9 12 90.900781 17.399219 100.80078 27.199219 C 110.70078 36.999219 116 50.1 116 64 C 116 77.9 110.60078 90.900781 100.80078 100.80078 C 90.900781 110.60078 77.9 116 64 116 C 50.1 116 37.099219 110.60078 27.199219 100.80078 C 17.299219 91.000781 12 77.9 12 64 C 12 50.1 17.399219 37.099219 27.199219 27.199219 C 36.999219 17.299219 50.1 12 64 12 z M 50.5625 47.5 C 49.8 47.5 49.05 47.800391 48.5 48.400391 C 47.3 49.600391 47.3 51.499609 48.5 52.599609 L 59.800781 64 L 48.400391 75.300781 C 47.200391 76.500781 47.200391 78.4 48.400391 79.5 C 49.000391 80.1 49.8 80.400391 50.5 80.400391 C 51.2 80.400391 51.999609 80.1 52.599609 79.5 L 64 68.199219 L 75.300781 79.5 C 75.900781 80.1 76.700391 80.400391 77.400391 80.400391 C 78.100391 80.400391 78.9 80.1 79.5 79.5 C 80.7 78.3 80.7 76.400781 79.5 75.300781 L 68.199219 64 L 79.5 52.699219 C 80.7 51.499219 80.699609 49.600391 79.599609 48.400391 C 78.399609 47.200391 76.500391 47.200391 75.400391 48.400391 L 64 59.800781 L 52.699219 48.400391 C 52.099219 47.800391 51.325 47.5 50.5625 47.5 z"});function v(t,e){var a=t.title,r=t.titleId,c=h(t,["title","titleId"]);return n.createElement("svg",b({fill:"#000000",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128",width:"64px",height:"64px",ref:e,"aria-labelledby":r},c),a?n.createElement("title",{id:r},a):null,O)}var g=n.forwardRef(v),x=(a.p,function(t){var e=t.countryData,a=t.setShowCard,c=t.showCard,o=t.selectedCountry,s=t.isoCodes,l=t.timeData,u=t.render,d=Object(n.useState)({}),f=Object(i.a)(d,2),m=f[0],b=f[1];Object(n.useEffect)((function(){var t=document.getElementById("root"),e=document.getElementById("card"),r=function(t){e.contains(t.target)||a(!1)};return t.addEventListener("click",r),function(){t.removeEventListener("click",r)}}),[]),Object(n.useEffect)((function(){if(l.length>0&&e){var t=l.reduce((function(t,a){return a[e.location]>0&&a.date.length>0&&t.push({date:j.m("%Y-%m-%d")(a.date),value:parseInt(a[e.location])}),t}),[]);b(t)}}),[e,l]);return e?Object(r.jsxs)("div",{id:"card",className:c?"info-container":"inactive",children:[Object(r.jsxs)("div",{className:"info-title-container",children:[Object(r.jsx)("header",{className:"card-title",children:e.location}),Object(r.jsx)("img",{className:"flag-image",src:"OWID_WRL"===o?"":"https://www.countryflags.io/".concat(s.iso_a3,"/shiny/32.png"),alt:""}),Object(r.jsx)("button",{className:"cancel-button",children:Object(r.jsx)(g,{onClick:function(){a(!1)},className:"cancel-icon"})})]}),Object(r.jsx)("div",{className:"body-container",children:u(m)}),Object(r.jsxs)("div",{className:"footer-container",children:[Object(r.jsxs)("li",{className:"footer-item",children:[Object(r.jsx)("h4",{className:"footer-item-desc",children:e.new_tests?Object(r.jsx)(p.a,{separator:",",format:"d",duration:"1",end:e.new_tests}):null}),Object(r.jsx)("p",{className:"footer-item-title",children:"new tests"})]}),Object(r.jsxs)("li",{className:"footer-item",children:[Object(r.jsx)("h4",{className:"footer-item-desc",children:e.total_cases?Object(r.jsx)(p.a,{separator:",",format:"d",duration:"1",end:e.total_cases}):null}),Object(r.jsx)("p",{className:"footer-item-title",children:"cases"})]}),Object(r.jsxs)("li",{className:"footer-item",children:[Object(r.jsx)("h4",{className:"footer-item-desc",children:e.new_cases?Object(r.jsx)(p.a,{separator:",",format:"d",duration:"1",end:e.new_cases}):null}),Object(r.jsx)("p",{className:"footer-item-title",children:"new cases"})]})]})]}):Object(r.jsx)("div",{})});function y(){return(y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t}).apply(this,arguments)}function w(t,e){if(null==t)return{};var a,r,n=function(t,e){if(null==t)return{};var a,r,n={},c=Object.keys(t);for(r=0;r<c.length;r++)a=c[r],e.indexOf(a)>=0||(n[a]=t[a]);return n}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)a=c[r],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(n[a]=t[a])}return n}var C=n.createElement("defs",null,n.createElement("style",null)),N=n.createElement("path",{className:"a",d:"M46.5,19A1.49977,1.49977,0,0,0,45,20.5V22H40.87225a16.9,16.9,0,0,0-3.53-8.51367l2.92121-2.92139,1.17582.99561a1.49993,1.49993,0,1,0,2.12134-2.1211l-4.99991-5a1.4999,1.4999,0,0,0-2.12127,2.1211l.99565,1.17578-2.92139,2.92138A16.90205,16.90205,0,0,0,26,7.12793V3h1.5a1.5,1.5,0,0,0,0-3h-7a1.5,1.5,0,0,0,0,3H22V7.12793a16.90205,16.90205,0,0,0-8.51367,3.52978L10.56494,7.73633l.99565-1.17578a1.4999,1.4999,0,0,0-2.12127-2.1211l-4.88475,5a1.49993,1.49993,0,0,0,2.12133,2.1211l1.06067-.99561,2.92121,2.92139A16.9,16.9,0,0,0,7.12775,22H3V20.5a1.5,1.5,0,0,0-3,0v7a1.5,1.5,0,0,0,3,0V26H7.12775a16.9,16.9,0,0,0,3.53,8.51367L7.73657,37.43506l-1.17582-.99561a1.49993,1.49993,0,0,0-2.12134,2.1211l4.99991,5a1.4999,1.4999,0,1,0,2.12127-2.1211l-.99565-1.17578,2.92127-2.92138A16.902,16.902,0,0,0,22,40.87207V45H20.5a1.5,1.5,0,0,0,0,3h7a1.5,1.5,0,0,0,0-3H26V40.87207a16.902,16.902,0,0,0,8.51379-3.52978l2.92127,2.92138-.99565,1.17578a1.4999,1.4999,0,0,0,2.12127,2.1211l4.99991-5a1.49993,1.49993,0,1,0-2.12134-2.1211l-1.17582.99561-2.92121-2.92139A16.9,16.9,0,0,0,40.87225,26H45v1.5a1.5,1.5,0,0,0,3,0v-7A1.49977,1.49977,0,0,0,46.5,19Zm-28,1A3.5,3.5,0,1,1,22,16.5,3.49994,3.49994,0,0,1,18.5,20ZM30,33a2,2,0,1,1,2-2A2.00006,2.00006,0,0,1,30,33Z"});function k(t,e){var a=t.title,r=t.titleId,c=w(t,["title","titleId"]);return n.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",ref:e,"aria-labelledby":r},c),a?n.createElement("title",{id:r},a):null,C,N)}var E=n.forwardRef(k),S=(a.p,function(t){var e=Object(n.useRef)(),a=Object(n.useRef)(),c=Object(n.useRef)(),o=Object(n.useRef)();return Object(n.useEffect)((function(){if(t.formattedData.length>0){var a={top:0,bottom:20,left:40,right:20},r=600-a.left-a.right-3,n=300-a.top-a.bottom,o=j.k(e.current).append("svg").attr("display","block").attr("preserveAspectRatio","none").attr("viewBox","0 0 ".concat(600," ",300)),s=o.append("g").attr("transform","translate(".concat(a.left,",0)")),i=j.j().domain(j.d(t.formattedData,(function(t){return t.date}))).range([0,r]),l=j.i().range([n,0]).domain([0,j.g(t.formattedData,(function(t){return t.value}))]);s.append("g").call(j.b(l).tickFormat((function(t){return j.e(".2s")(t)}))),s.append("g").attr("transform","translate(0,".concat(n,")")).call(j.a(i).ticks(5));var u=j.c((function(t){return t.date})).left,d=s.append("g").append("circle").style("fill","#4285f4").attr("stroke","#4285f4").attr("r",4).style("opacity",0),f=j.k(e.current).append("div"),m=j.k(c.current).append("p").text(j.l("%B,%d")(t.formattedData[0].date)).attr("class","graph-counter").attr("x","50%").attr("y","50%").attr("fill","black").attr("font-size","12px").attr("dominant-baseline","middle").attr("text-anchor","middle"),p=j.k(c.current).append("p").text(t.formattedData[0].value).attr("class","graph-counter").attr("fill","black").attr("font-size","12px").attr("dominant-baseline","middle").attr("text-anchor","middle");s.selectAll("g").attr("font-family","Roboto Mono, monospace").attr("font-size","12px"),s.append("path").datum(t.formattedData).attr("fill","none").attr("stroke","#4285f4").attr("stroke-width",3).attr("vector-effect","non-scaling-stroke").attr("d",j.f().x((function(t){return i(t.date)})).y((function(t){return l(t.value)}))),o.select("g").append("rect").attr("overflow","visible").style("fill","none").attr("x",0).attr("y",-120).attr("height",400).attr("width",r).style("pointer-events","all").on("mouseover",(function(){d.style("opacity",1)})).on("mousemove",(function(e){var a=i.invert(j.h(e)[0]),r=u(t.formattedData,a,1),n=t.formattedData[r];if(!n)return;d.attr("cx",i(n.date)).attr("cy",l(n.value)),m.html(j.l("%B,%d")(n.date)),p.html((new Intl.NumberFormat).format(n.value)),f.attr("x",i(n.date)),f.attr("y",l(n.value))})).on("mouseout",(function(){d.style("opacity",0)}))}return function(){j.k(e.current).selectAll("svg").remove(),j.k(e.current).selectAll("div").remove(),j.k(c.current).selectAll("p").remove()}}),[t.formattedData]),Object(r.jsxs)("div",{ref:o,className:"graph-wrapper",children:[Object(r.jsx)("div",{className:"graph-container",ref:a,children:Object(r.jsx)("div",{className:"svg-image",ref:e})}),Object(r.jsx)("div",{ref:c,className:"graph-counter"})]})}),A=a(43),_=function(t){var e=t.setTooltipContent,a=t.data,n=t.selectCountry,c=t.getCountry,o=t.colorScale,s=t.setShowCard;return Object(r.jsx)("div",{className:"map-container",children:Object(r.jsxs)(A.ComposableMap,{viewBox:"0 100 800 400","data-tip":"",projectionConfig:{scale:147},children:[Object(r.jsx)(A.Graticule,{stroke:"#dadce0"}),Object(r.jsx)(A.Geographies,{geography:"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json",children:function(t){return t.geographies.map((function(t){var i=t.properties,l=i.NAME,u=i.ISO_A3,d=a[u];return Object(r.jsx)(A.Geography,{cur:d,stroke:"#EAEAEC",strokeWidth:"0.4px",cursor:"pointer",fill:d?o(d.total_cases):"",onClick:function(){return function(t){a[t.properties.ISO_A3]?(s(!0),n(t.properties.ISO_A3,t.properties.ISO_A2),c(t.properties.ISO_A3)):(window.alert("Not enough data."),s(!1))}(t)},onMouseEnter:function(){e(l)},onMouseLeave:function(){e("")},geography:t},t.rsmKey)}))}})]})})},I=function(t){var e=t.length;return t.hasOwnProperty?Array.prototype.slice.call(t):new Array(e).fill().map((function(e){return t[e]}))},D=function(t,e,a,r){return{top:{l:-a/2,r:a/2,t:-(r+3+2),b:-3},bottom:undefined,left:undefined,right:undefined}},L=function(t){var e=t.getBoundingClientRect(),a=e.height,r=e.width;return{height:parseInt(a,10),width:parseInt(r,10)}},R=function(t,e){return{mouseX:t.clientX,mouseY:t.clientY}},B=function(t){var e=Object(n.useState)(!1),a=Object(i.a)(e,2)[1],c=Object(n.useState)(!1),o=Object(i.a)(c,2)[1],s=Object(n.useState)(!1),l=Object(i.a)(s,2)[1],u=Object(n.useState)(""),d=(Object(i.a)(u,2)[1],Object(n.useState)("")),f=Object(i.a)(d,2)[1],j=Object(n.useState)(""),m=Object(i.a)(j,2),p=m[0],b=m[1];Object(n.useEffect)((function(){return h&&O(),function(){w()}}),[t.children]);var h=Object(n.useRef)(null),O=function(){g().forEach((function(t){t.addEventListener("mouseenter",v,!1),t.addEventListener("mousemove",x,!1)}))},v=function(t){if(h){var e=t.currentTarget.getAttribute("data-tip"),a=t.currentTarget;f("dark"),o((function(t){return a})),b(e)}},g=function(){var t,e=[];return t="[data-tip]",I(document.getElementsByTagName("*")).filter((function(t){return t.shadowRoot})).forEach((function(a){e=e.concat(I(a.shadowRoot.querySelector(t)))})),e.concat(I(document.querySelectorAll(t)))},x=function(e){var r=e.currentTarget||e.target,n=h.current;n.style.display="block";a((function(){var a=function(){var e=t.children;return function(t,e){return e||t}(p,e)}();if(!y(a)){var c={};c.currentEvent=e,c.currentTarget=r;var o=function(t,e,a,r){var n=L(a),c=n.width,o=n.height,s=L(e),i=s.width,l=s.height,u=R(t,e),d=u.mouseX,f=u.mouseY,j=D(i,l,c,o);return{position:{left:parseInt(function(t){var e=j[t].l;return d+e}(r)),top:parseInt(function(t){var e=j[t].t;return f+e}(r)),bottom:parseInt(function(t){var e=j[t].b;return f+e}(r)),right:parseInt(function(t){var e=j[t].r;return d+e}(r))}}}(c.currentEvent,c.currentTarget,n,"top");return n.style.left=o.position.left+"px",n.style.top=o.position.top-20+"px",c}n.style.display="none"})),o((function(t){return r})),l(!0)},y=function(t){return"string"===typeof t&&""===t||null===t},w=function(){g().forEach((function(t){t.removeEventListener("mouseenter",v,!1),t.removeEventListener("mousemove",x,!1)}))};return Object(r.jsx)("div",{className:"tooltip-map",ref:h,children:t.children})},T=function(t){var e=t.countryData,a=t.getCountry;t.render;if(Object(n.useEffect)((function(){a("OWID_WRD")}),[]),!e)return Object(r.jsx)("div",{});return Object(r.jsxs)("div",{className:"tracker-container",children:[Object(r.jsxs)("div",{className:"counter-container",children:[Object(r.jsx)("header",{className:"tracker-item-title",children:"Total Cases:"}),e.total_cases?Object(r.jsx)(p.a,{separator:",",format:"d",duration:"1",end:e.total_cases}):null]}),Object(r.jsxs)("div",{className:"counter-container",children:[Object(r.jsx)("header",{className:"tracker-item-title",children:"Total Deaths:"}),e.total_deaths?Object(r.jsx)(p.a,{separator:",",format:"d",duration:"1",end:e.total_deaths}):null]}),Object(r.jsxs)("div",{onClick:function(){},className:"counter-container",children:[Object(r.jsx)("header",{className:"tracker-item-title",children:"Total Vaccinated:"}),e.total_vaccinations?Object(r.jsx)(p.a,{separator:",",format:"d",duration:"1",end:e.total_vaccinations}):null]})]})},M=function(){var t,e=Object(n.useState)(""),a=Object(i.a)(e,2),c=a[0],o=a[1],s=Object(n.useState)([]),l=Object(i.a)(s,2),j=l[0],m=l[1],p=Object(n.useState)([]),b=Object(i.a)(p,2),h=b[0],O=b[1],v=Object(n.useState)(""),g=Object(i.a)(v,2),y=g[0],w=(g[1],Object(n.useState)({})),C=Object(i.a)(w,2),N=C[0],k=C[1],A=Object(n.useState)(!1),I=Object(i.a)(A,2),D=I[0],L=I[1],R=Object(n.useState)({iso_a2:"",iso_a3:""}),M=Object(i.a)(R,2),F=M[0],P=M[1],V=Object(n.useState)([]),z=Object(i.a)(V,2),H=z[0],W=z[1];Object(n.useEffect)((function(){Object(f.a)("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/biweekly_cases.csv",{complete:function(t){W(t.data)},header:!0})}),[]),Object(n.useEffect)((function(){u()({url:"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/latest/owid-covid-latest.json",method:"GET"}).then((function(t){var e=Object.keys(t.data).map((function(e){return t.data[e]}));k(e),m(t.data),O(t.data.OWID_WRL)}))}),[]),N.length>0&&(t=Object(d.a)().domain(N.map((function(t){return t.total_cases}))).range(["#EAF2F8","#7FB3D5","#7FB3D5","#5499C7","#2980B9","#2471A3","#1F618D","#1A5276","#154360"]));var G=function(t){j[t]&&O(j[t])};return j?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(B,{children:c}),Object(r.jsxs)("div",{className:"wrapper",children:[" ",D?Object(r.jsx)(x,{timeData:H,isoCodes:F,showCard:D,setShowCard:L,countryData:h,render:function(t){return Object(r.jsx)(S,{isoCodes:F,formattedData:t})}}):null,Object(r.jsxs)("div",{className:"title-container",children:[Object(r.jsx)("header",{className:"title",children:"Covid-19 Tracker"}),Object(r.jsx)("div",{className:"cov-image-container",children:Object(r.jsx)(E,{style:{fill:"white"}})})]}),Object(r.jsxs)("div",{className:"map-wrapper",children:[Object(r.jsx)(T,{getCountry:G,countryData:h}),Object(r.jsx)(_,{setShowCard:L,colorScale:t,getCountry:G,selectCountry:function(t,e){P({iso_a2:t,iso_a3:e})},getData:function(t){if(j)return j.filter((function(e){if(Object.getOwnPropertyNames(e)[0]===t.properties.ISO_A3)return e}))},selectedCountry:y,data:j,setTooltipContent:o})]})]})]}):Object(r.jsx)("div",{})};s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(M,{})}),document.getElementById("root"))}},[[254,1,2]]]);
//# sourceMappingURL=main.65336cfc.chunk.js.map